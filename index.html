<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!--API's-->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js'></script>
        <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
        <title>Earthquake Monitor</title>

        <!--styling-->
        <style>
            body{
                margin: 0;
            }
            #map{
                height: 100vh;
                width: 100vw;
            }
        </style>
        

    </head>
    <body>

        <script>
            //reading sensor input
            var socket = io();
            socket.on('data',function(data){//on detecting earthquake

                //sorting input
                const str = String(data).split('-');
                const latitude = str[1];
                const longitude = str[2];
                mapboxgl.accessToken = 'pk.eyJ1Ijoiamt4enZiIiwiYSI6ImNrd2M5NXplOTA3d2EydXF2N3Nwd3Y0M2oifQ.Ne_ZJObv7Vpi2Wh2c1kFpQ';
                setupMap([longitude ,latitude]) //setting up custum map

                function setupMap(center){
                    const map = new mapboxgl.Map({
                        container: 'map',
                        style: 'mapbox://styles/mapbox/streets-v11',
                        center: center,
                        zoom: 10
                    });
                      const nav = new mapboxgl.NavigationControl()
                      map.addControl(nav); // adds navigation controlls
                      const marker = new mapboxgl.Marker().setLngLat([longitude,latitude]).addTo(map); //adding station marker           
                }
            });
        </script>

        <div id='map'></div> 

    </body>
    <!--default map script-->
    <script src="script.js"></script> 

</html>